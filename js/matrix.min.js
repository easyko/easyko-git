function setSingleInputAfterCheck(e,o,t){var i=$(e).closest(".form-group");if(i.find(".okay.active").removeClass("active"),!(i.find(".error.active").length>0)){var r=checkSingleInput(e,o,t);"skip"!==r&&(void 0!==r?markTip(r,e):i.find(".okay").addClass("active"))}}function checkSingleInput(e,o){var t=$(e).val(),i=$(e).closest(".form");if(void 0===$(e).attr("required")&&void 0===$(e).attr("match")&&void 0===$(e).attr("equal")&&void 0===$(e).attr("diff"))return"skip";if("required"===$(e).attr("required")&&(""===t||"checkbox"===$(e).attr("type")&&"checked"!==$(e).attr("checked")))return o?"skip":"required";var r=$(e).attr("match"),a=$(e).attr("name");if(void 0!==r){if(""===t)return"skip";var n=[];if(n.usrMp=new RegExp(/^1[0-9]{10}$/),n.email=new RegExp(/^([a-zA-Z0-9_\.\-]+)(@{1})([a-zA-Z0-9_\.\-]+)(\.[a-zA-Z0-9]{1,3})$/),n.usrId=new RegExp(/^[0-9a-zA-Z_.@-]{6,25}$/),n.userPw=new RegExp(/^.{6,16}$/),n.smsCode=new RegExp(/^0?\d{6}$/),n.bankCard=new RegExp(/^[0-9]{10,32}$/),"userPw"===r&&setPwdStr(e),!t.match(n[r])||"certId"===r&&"certId"===a&&!getIdCardInfo(t).isTrue)return"match"}if(void 0!==$(e).attr("equal")){var d=$(i).find("input[name="+$(e).attr("equal")+"]"),s=$(d).val(),c=$(e).closest(".form-group").find(".equal"),f=$(i).find(d).closest(".form-group").find(".equal"),l=$(e).closest(".form-group").find(".okay"),u=$(d).closest(".form-group").find(".okay");if(""!==s&&""!==t)if(t!==s){if(0!==c.length)return l.removeClass("active"),"equal";u.removeClass("active"),markTip("equal",d)}else 0===c.length&&(f.removeClass("active"),d.removeClass("form-unit-error"),u.addClass("active"));else if(1===c.length)return"skip"}if(void 0!==$(e).attr("diff")){var m=$(i).find("input[name="+$(e).attr("diff")+"]"),p=$(m).val(),c=$(e).closest(".form-group").find(".diff"),v=$(i).find(m).closest(".form-group").find(".diff"),l=$(e).closest(".form-group").find(".okay"),h=$(m).closest(".form-group").find(".okay");if(""!==p&&""!==t)if(t===p){if(0!==c.length)return l.removeClass("active"),"diff";h.removeClass("active"),markTip("diff",m)}else 0===c.length&&($(v).removeClass("active"),$(m).removeClass("form-unit-error"),h.addClass("active"))}}function markTip(e,o){var t;"object"==typeof e?(t=e[0],$(o).closest(".form-group").find("."+t+" p").text(e[1])):t=e,"checking"!==t&&"okay"!==t&&($(o).addClass("form-unit-error"),"hidden"===$(o).attr("type")&&$(o).closest(".form-group").find(".form-unit").addClass("form-unit-error")),$(o).closest(".form-group").find("."+t).addClass("active")}function checkCardId(e){var o=$(e).parent().find(".tips-content-card"),t=e.value;""!==t?o.show():o.hide(),o.text(t.replace(/(\d{4})(?=\d)/g,"$1 "))}function modalShow(e){$("#"+e+":visible")[0]||(!$(".modal-backdrop")[0]&&$("#"+e)[0]&&($("body").append("<div class='modal-backdrop'></div>"),modalLayout()),$("#"+e).show(),modalCenter(e))}function modalHide(){$(".modal").hide(),$(".modal-backdrop").remove()}function modalLayout(){$(".modal-backdrop").css({width:$("body").width(),height:$("body").height()})}function modalCenter(){$(".modal:visible").each(function(){void 0===$(this).data("height")&&($(this).data("height",$(this).height()),$(this).data("dbHeight",$(this).find(".modal-bd").height()));var e=$(this).data("height"),o=$(this).data("dbHeight"),t=$(window).height()-50,i=$(this).find(".modal-bd");e>t?$(i).css("height",t-(e-o)):$(i).css("height","auto");var r=isIE6?$(window).height()/2+$(window).scrollTop()+"px":$(window).height()/2+"px";$(this).css({top:r,"margin-top":-$(this).height()/2})})}var isIE6=$.browser.msie&&parseInt($.browser.version)<=6;$(document).on("focus","input.form-unit",function(){var e=$(this).closest(".form-group");$(e).find(".active").removeClass("active"),$(e).find(".tip").addClass("active")}),$(document).on("blur","input.form-unit",function(){$(this).removeClass("form-unit-error"),$(this).closest(".form-group").find(".active").removeClass("active"),setSingleInputAfterCheck(this)}),$(document).on("focus","input.input-text-zoom",function(){checkCardId(this)}),$(document).on("keyup","input.input-text-zoom",function(){checkCardId(this)}),$(document).on("click",".modal .close",function(){modalHide()}),window.onresize=function(){modalLayout(),modalCenter()},window.onscroll=function(){modalLayout(),modalCenter()},document.onkeyup=function(e){var o=window.event||e,t=o.keyCode?o.keyCode:o.which;27==t&&modalHide()};